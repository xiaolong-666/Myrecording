# 重构-改善既有代码的设计

什么是重构：

> 在不改变代码外在行为的前提下，对代码做出修改，以改进程序的内部结构。本质上说，重构就是在代码写好之后改进它的设计。
>
> 设计不是在一开始就完成的，而是在整个开发过程中逐渐浮现出来。

重构和性能优化有很多相似之处：

> 两者都需要修改代码，并且两者都不会改变程序的整体功能
>
> 差别在于其目的：
>
> 重构是为了让代码 **更容易理解，更容易修改**。这可能使程序运行得更快，也可能使程序运行得更慢。在性能优化时，我只关心让程序运行得更快，最终得到的代码有可能更难理解和维护。

## 为何重构

### 重构改进软件的设计

如果没有重构，程序的内部设计（或者叫架构）会逐渐腐败变质。

**改进设计的一个重要方向就是消除重复代码** ，代码量减少并不会使系统运行更快，因为这对程序的资源占用几乎没有任何明显影响。然后代码量减少将使未来可能的程序修改动作容易得多。

### 重构使软件更容易理解

所谓程序设计，很大程度上就是与计算机对话；除了计算机外，源码还有其他读者。

### 重构帮助找到bug

对代码进行重构，可以深入理解代码的所作所为，并立即把新的理解反映在代码当中。

### 重构提高编程速度

通过投入精力改善内部设计，我们增加了软件的耐久性，从而可以更长时间地保持开发的快速。

## 何时重构

三次法则

> 第一次做某件事时只管去做；第二次做类似的事会产生反感，但无论如何还是可以去做；第三次在做类似的事，你就应该重构。事不过三，三则重构。

### 预备性重构：让添加新功能更容易

重构的最佳时机就在添加新功能之前。

### 帮助理解的重构：使代码更容易懂

比如变量或者函数重命名

### 捡垃圾式重构

发现的垃圾很容易重构，则马上重构它；如果需要花费一定的精力，则等完成当下的任务后再来重构它。             只要要让营地比你达到时干净--露营者



## 省钱链接

在线阅读: https://book-refactoring2.ifmicro.com/docs/ch1.html
